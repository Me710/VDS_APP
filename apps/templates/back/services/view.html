{% extends 'back/layouts/base.html' %}

{% block title %} Billing {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

  <div class="min-height-300 bg-primary position-absolute w-100"></div>

  {% include "back/includes/sidenav.html" %}

  <main class="main-content position-relative border-radius-lg ">

    {% include "back/includes/navigation.html" %}
<div class="container-fluid py-4">
  <div class="row">
    <div class="col-lg-8">
      <div class="row">
        <div class="col-xl-6 mb-xl-0 mb-4">
          <div class="card bg-transparent shadow-xl">
            <div class="overflow-hidden position-relative border-radius-xl" style="background-image: url('https://images.unsplash.com/photo-1498837167922-ddd27525d352?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');">
              <span class="mask bg-gradient-dark"></span>
              <div class="card-body position-relative z-index-1 p-3">
                <i class="fas fa-cross text-white p-2"></i>
                <h5 class="text-white mt-4 mb-5 pb-2">Gestion des Services</h5>
                <div class="d-flex">
                  <div class="d-flex">
                    <div class="me-4">
                      <p class="text-white text-sm opacity-8 mb-0">Administrateur</p>
                      <h6 class="text-white mb-0">Christian NEBOT</h6>
                    </div>
                    <div>
                      <p class="text-white text-sm opacity-8 mb-0">Date</p>
                      <h6 class="text-white mb-0">03/08/2024</h6>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xl-6">
          <div class="row">
            <div class="col-md-6">
              <div class="card">
                <div class="card-header mx-4 p-3 text-center">
                  <div class="icon icon-shape icon-lg bg-gradient-primary shadow text-center border-radius-lg">
                    <i class="fas fa-book opacity-10"></i>
                  </div>
                </div>
                <div class="card-body pt-0 p-3 text-center">
                  <h6 class="text-center mb-0">Publications Totales</h6>
                  <span class="text-xs">Tous services confondus</span>
                  <hr class="horizontal dark my-3">
                  <h5 class="mb-0">1,280</h5>
                </div>
              </div>
            </div>
            <div class="col-md-6 mt-md-0 mt-4">
              <div class="card">
                <div class="card-header mx-4 p-3 text-center">
                  <div class="icon icon-shape icon-lg bg-gradient-primary shadow text-center border-radius-lg">
                    <i class="fas fa-users opacity-10"></i>
                  </div>
                </div>
                <div class="card-body pt-0 p-3 text-center">
                  <h6 class="text-center mb-0">Abonnés Newsletter</h6>
                  <span class="text-xs">Croissance mensuelle</span>
                  <hr class="horizontal dark my-3">
                  <h5 class="mb-0">+12%</h5>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-12 mb-lg-0 mb-4">
          <div class="card mt-4">
            <div class="card-header pb-0 p-3">
              <div class="row">
                <div class="col-6 d-flex align-items-center">
                  <h6 class="mb-0">Services VDS</h6>
                </div>
                <div class="col-6 text-end">
                  <a class="btn bg-gradient-dark mb-0" href="{{ url_for('services_blueprint.list_services') }}"><i class="fas fa-plus"></i>&nbsp;&nbsp;La liste</a>
                </div>
              </div>
            </div>
            <div class="card shadow-sm border-0">
              <div class="card-body p-4">
                <div class="row g-4">
                  <div class="col-lg-8">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                      <h1 class="mb-0">{{ service.name }}</h1>
                      <span class="badge bg-primary">{{ service.acronyme }}</span>
                    </div>
                    <div class="mb-4">
                      <h5 class="text-muted mb-3">Informations du service</h5>
                      <div class="row g-3">
                        <div class="col-md-6">
                          <div class="card bg-light">
                            <div class="card-body">
                              <p class="mb-1"><i class="fas fa-user-tie me-2"></i><strong>Responsable:</strong></p>
                              <p class="mb-0">{{ service.responsable }}</p>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="card bg-light">
                            <div class="card-body">
                              <p class="mb-1"><i class="fas fa-pray me-2"></i><strong>Saint Patron:</strong></p>
                              <p class="mb-0">{{ service.saint_patron }}</p>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="card bg-light">
                            <div class="card-body">
                              <p class="mb-1"><i class="fas fa-calendar-alt me-2"></i><strong>Créé le:</strong></p>
                              <p class="mb-0">{{ service.creer_le }}</p>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="card bg-light">
                            <div class="card-body">
                              <p class="mb-1"><i class="fas fa-user-plus me-2"></i><strong>Créé par:</strong></p>
                              <p class="mb-0">{{ service.creer_par }}</p>
                            </div>
                          </div>
                        </div>
                        <div class="col-12">
                          <div class="card bg-light">
                            <div class="card-body">
                              <p class="mb-1"><i class="fas fa-clock me-2"></i><strong>Horaire standard:</strong></p>
                              <p class="mb-0">{{ service.horaire_standard }}</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="mb-4">
                      <h5 class="text-muted mb-3">Description</h5>
                      <div class="card bg-light">
                        <div class="card-body">
                          <p class="mb-0">{{ service.description }}</p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-4">
                    {% if service.image %}
                    <div class="card mb-4">
                      <img src="/static/assets/img/vds/pds.png" alt="Image du service" class="card-img-top">
                      <div class="card-body bg-light">
                        <h5 class="card-title">Image du service</h5>
                      </div>
                    </div>
                    {% endif %}
                    <div class="card mb-4">
                      <div class="card-header bg-primary text-white">
                        <h5 class="card-title mb-0">Membres</h5>
                      </div>
                      <ul class="list-group list-group-flush">
                      {% for user in service.users %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                          <a href="{{ url_for('users_blueprint.view_user', id=user.id) }}" class="text-decoration-none">
                            <i class="fas fa-user me-2"></i>{{ user.username }}
                          </a>
                          <span class="badge bg-secondary rounded-pill">{{ user.role }}</span>
                        </li>
                      {% endfor %}
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="mt-4 d-flex justify-content-end">
                  <a href="{{ url_for('services_blueprint.edit_service', id=service.id) }}" class="btn btn-warning me-2">
                    <i class="fas fa-edit me-2"></i>Modifier
                  </a>
                  <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteServiceModal">
                    <i class="fas fa-trash-alt me-2"></i>Supprimer
                  </button>
                </div>
              </div>
            </div>
            
            <!-- Delete Confirmation Modal -->
            <div class="modal fade" id="deleteServiceModal" tabindex="-1" aria-labelledby="deleteServiceModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="deleteServiceModalLabel">Confirmer la suppression</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    Êtes-vous sûr de vouloir supprimer ce service ?
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <form action="{{ url_for('services_blueprint.delete_service', id=service.id) }}" method="POST">
                      <button type="submit" class="btn btn-danger">Supprimer</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="card h-100">
        <div class="card-header pb-0 p-3">
          <div class="row">
            <div class="col-6 d-flex align-items-center">
              <h6 class="mb-0">Publications Récentes</h6>
            </div>
            <div class="col-6 text-end">
              <button class="btn btn-outline-primary btn-sm mb-0">Voir Tout</button>
            </div>
          </div>
        </div>
        <div class="card-body p-3 pb-0">
          <ul class="list-group">
            <li class="list-group-item border-0 d-flex justify-content-between ps-0 mb-2 border-radius-lg">
              <div class="d-flex flex-column">
                <h6 class="mb-1 text-dark font-weight-bold text-sm">3 Août 2024</h6>
                <span class="text-xs">Pensée Du Jour</span>
              </div>
              <div class="d-flex align-items-center text-sm">
                2,300 vues
                <button class="btn btn-link text-dark text-sm mb-0 px-0 ms-4"><i class="fas fa-file-alt text-lg me-1"></i> Voir</button>
              </div>
            </li>
            <li class="list-group-item border-0 d-flex justify-content-between ps-0 mb-2 border-radius-lg">
              <div class="d-flex flex-column">
                <h6 class="text-dark mb-1 font-weight-bold text-sm">2 Août 2024</h6>
                <span class="text-xs">Histoire De Saint</span>
              </div>
              <div class="d-flex align-items-center text-sm">
                1,800 vues
                <button class="btn btn-link text-dark text-sm mb-0 px-0 ms-4"><i class="fas fa-file-alt text-lg me-1"></i> Voir</button>
              </div>
            </li>
            <li class="list-group-item border-0 d-flex justify-content-between ps-0 mb-2 border-radius-lg">
              <div class="d-flex flex-column">
                <h6 class="text-dark mb-1 font-weight-bold text-sm">1 Août 2024</h6>
                <span class="text-xs">Message Du Pape</span>
              </div>
              <div class="d-flex align-items-center text-sm">
                3,100 vues
                <button class="btn btn-link text-dark text-sm mb-0 px-0 ms-4"><i class="fas fa-file-alt text-lg me-1"></i> Voir</button>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-lg-7 mb-lg-0 mb-4">
      <div class="card">
        <div class="card-header pb-0 p-3">
          <div class="d-flex justify-content-between">
            <h6 class="mb-2">Statistiques des Services</h6>
          </div>
        </div>
        <div class="table-responsive">
          <table class="table align-items-center mb-0">
            <tbody>
              <tr>
                <td>
                  <div class="d-flex px-2 py-1 align-items-center">
                    <div class="ms-4">
                      <p class="text-xs font-weight-bold mb-0">Service:</p>
                      <h6 class="text-sm mb-0">Pensée Du Jour</h6>
                    </div>
                  </div>
                </td>
                <td>
                  <div class="text-center">
                    <p class="text-xs font-weight-bold mb-0">Publications:</p>
                    <h6 class="text-sm mb-0">365</h6>
                  </div>
                </td>
                <td>
                  <div class="text-center">
                    <p class="text-xs font-weight-bold mb-0">Vues:</p>
                    <h6 class="text-sm mb-0">250,000</h6>
                  </div>
                </td>
              </tr>
              <!-- Répétez ce bloc pour les autres services -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="col-lg-5">
      <div class="card">
        <div class="card-header pb-0 p-3">
          <h6 class="mb-0">Activités Récentes</h6>
        </div>
        <div class="card-body p-3">
          <ul class="list-group">
            <li class="list-group-item border-0 d-flex justify-content-between ps-0 mb-2 border-radius-lg">
              <div class="d-flex align-items-center">
                <div class="icon icon-shape icon-sm me-3 bg-gradient-dark shadow text-center">
                  <i class="fas fa-pencil-alt text-white opacity-10"></i>
                </div>
                <div class="d-flex flex-column">
                  <h6 class="mb-1 text-dark text-sm">Nouvelle publication</h6>
                  <span class="text-xs">Pensée Du Jour ajoutée pour le 4 Août 2024</span>
                </div>
              </div>
              <div class="d-flex">
                <button class="btn btn-link btn-icon-only btn-rounded btn-sm text-dark icon-move-right my-auto"><i class="ni ni-bold-right" aria-hidden="true"></i></button>
              </div>
            </li>
            <!-- Ajoutez d'autres activités récentes ici -->
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  </main> 

{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %}{% endblock javascripts %}
